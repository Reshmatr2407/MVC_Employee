
@{
    ViewData["Title"] = "Viewimage";
}


@{
    ViewData["Title"] = "Searchbyid";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>searchbyid</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .first {
            background-color: antiquewhite;
            border: 1px solid black;
            width: 1000px;
            text-align: center;
            height: auto;
            margin:auto;
        }
        button {
            height: 25px;
            width: 180px;
        }
        .second {
            background-color: beige;
            border: 1px solid black;
            width: 1000px;
            text-align: center;

            margin: auto;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
        }
        th, td {

            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th {
            background-color: #007BFF;
            color: white;
        }
        #txtempid{
            width:25%;
        }
        input[type="text"] {
            width:100%;
            padding: 8px;
            box-sizing: border-box; /* Ensures padding is included in width */
        }
    </style>
</head>
<body>
    <div class="first">
        <br><br />
        IMAGE CODE
        <input type="text" id="txtimgid">
        <br><br>
        <button value="Search" onclick="search1()" id="btnsearch">
            Search
        </button>
        <br><br>
        <img height="300px" width="300px" alt="image here" id="imageElement" />
    </div>
    
    <script>
        function search1() {
            
            var ID = document.getElementById('txtimgid').value;

            var d1 = fetchapiGet(ID);

            // var img = document.getElementById('img1');
            // img.src = d1[0].img;
            // var des = document.getElementById('txtempdes');
            // des.value = d1[0].designation;
            // var depname = document.getElementById('txtempdepname');
            // depname.value = d1[0].department;

        }


        function fetchapiGet(ImgID) {
            
            var flag = "select_img";
            //concatenating EMP and flag with a '$' separator
            var indata = flag + '$' + ImgID;
            // Initializing a variable to hold the response data
            var data = '';
             // Making an AJAX GET request using jQuery
            $.ajax({
                // The type of request
                type: "GET",
                // The URL to which the request is sent
                url: '/Employee/getAPIImage',
                // The data to be sent to the server, wrapped in an object
                data: { datas: indata },
                // This makes the request synchronous
                async: false,
                // This function is called if the request is successful
                success: function (response) {
                    // Parsing the JSON response from the server
                    debugger;
                    data = JSON.parse(response);
                    console.log("Parsed data:", data); // Log the parsed data
                    console.log("Parsed data:", data[0].image);
                    loadimage(data[0].image); // Pass the Base64 image string to loadimage
                },
                // This function is called if the request fails
                error: function (response) {
                    // Setting a variable 'check' to 0, presumably to indicate an error
                    check = 0;
                }
            });
            // Returning the data variable
            return data;
        }
        function loadimage(imageData) {
            const imgElement = document.getElementById('imageElement'); // Get the image element by ID
            if (imgElement) {
                // Set the src attribute to the Base64 string
                imgElement.src = `data:image/jpeg;base64,${imageData}`; // Assuming the image is in JPEG format
            }
        }
    </script>
</body>
</html>




